{
  "apps": [
    {
      "name": "advisors-website",
      "script": "server.js",
      "instances": 2,
      "node_args" : ["--max_old_space_size=1024"],
      "exec_mode": "cluster",
      "cwd" : "./dist",
      "env"  : {
        "DEBUG": "",
        "NODE_ENV": "production"
      }
    }
  ],

  "deploy" : {
    "production" : {
      "key" : "/home/yomi/keys/ytadvisors/webserver.pem",
      "user" : "ubuntu",
      "host" : ["54.165.215.150"],
      "ref"  : "origin/master",
      "repo" : "git@github.com:ytwguru/advisors-website.git",
      "path" : "/home/ubuntu/ytadvisors/website",
      "ssh_options": "StrictHostKeyChecking=no",
      "pre-deploy-local" : "echo 'This is a local executed command'",
      "post-deploy" : "npm install --production && pm2 startOrRestart ecosystem.json --env production",
      "env"  : {
        "NODE_ENV": "production"
      }
    }
  }
}
